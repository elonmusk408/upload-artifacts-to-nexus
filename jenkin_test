#!/usr/bin/env groovy

@Library('shared-library@master') _ //master or whatever branch

pipeline {
    agent  any
   
    environment {
        NEXUS_VERSION = "nexus3"
        NEXUS_PROTOCOL = "http"
        NEXUS_URL = "18.223.151.220:8081/"
        NEXUS_REPOSITORY = "maven-snapshots"
        NEXUS_CREDENTIAL_ID = "nexus-user-credentials"
    }
    stages {
        stage("SCM") {
            steps {
                script {
                    git 'https://github.com/Naresh240/spring-boot-hello.git';
                }
            }
        }
        stage("Maven Build") {
            steps {
                script {
                    sh "mvn package "
                }
            }
        }
        stage("Publish to Nexus Repository Manager") {
            steps {
                        
                    nexus_test()             
                    } 
                }
    }
}
